# AI 故事分镜生成器 使用说明

## 概览

这是一个基于 Gemini AI 的故事分镜生成应用，可以帮你将故事转换为连续的场景图片。整个流程包含四个主要步骤：

1. **上传角色图片** - 作为故事主角的视觉参考
2. **编写故事** - 描述你想要讲述的故事
3. **生成分镜** - AI 分析故事并创建场景分镜
4. **生成图片** - 基于角色和分镜生成一致的场景图片

## 功能特点

### 🎭 角色一致性
- 上传的角色图片将作为所有场景的视觉参考
- AI 会保持角色外观特征的一致性
- 支持多种图片格式（JPG、PNG、GIF）

### 📖 智能分镜
- 自动分析故事结构
- 生成 4-8 个关键场景
- 每个分镜包含详细的场景描述、角色动作、环境设定和情感氛围

### 🎨 高质量图片生成
- 使用 Gemini 2.5 Flash 模型
- 插画风格，适合故事书展示
- 支持单独重新生成每个场景

### 💫 现代化界面
- 响应式设计，支持桌面和移动设备
- 直观的步骤指示器
- 实时进度显示

## 使用步骤

### 第一步：上传角色图片
1. 点击上传区域或拖拽图片文件
2. 选择一张清晰的角色图片（最大 10MB）
3. 确保角色特征明显，便于 AI 识别

**建议：**
- 使用高分辨率图片
- 角色应占据图片主要部分
- 避免复杂背景

### 第二步：编写故事
1. 在文本框中编写你的故事（至少 50 字符）
2. 建议包含：
   - 角色的外貌和性格描述
   - 明确的时间和地点设定
   - 动作和情感元素
   - 不同的场景变化
   - 适当的冲突或转折

**写作提示：**
- 故事长度建议 300-2000 字符
- 描述要具体且富有画面感
- 包含多个不同的场景环境

### 第三步：生成分镜
1. AI 会自动分析你的故事
2. 生成 4-8 个关键场景分镜
3. 每个分镜包含：
   - 场景编号和描述
   - 主角的具体动作
   - 环境和背景设定
   - 情感氛围标签

**可以做的操作：**
- 查看所有生成的分镜
- 如果不满意可以重新生成
- 检查场景逻辑是否连贯

### 第四步：生成图片
1. 点击"开始生成所有场景图片"
2. AI 会为每个分镜生成对应的图片
3. 保持角色外观的一致性
4. 生成时间约 2 分钟/张图片

**功能：**
- 实时显示生成进度
- 支持单独重新生成某个场景
- 可以下载任意场景图片
- 批量生成所有场景

## 技术特点

### AI 模型
- **分镜生成**：Gemini 2.0 Flash Exp（文本生成）
- **图片生成**：Gemini 2.5 Flash Image Preview（图像生成）
- **角色一致性**：基于参考图片的特征保持

### 前端架构
- **框架**：React 19 + TypeScript
- **构建工具**：Vite 6
- **样式**：Tailwind CSS 4
- **图标**：Lucide React

### 数据流
```
用户上传图片 → 编写故事 → AI分析生成分镜 → 基于角色生成场景图 → 展示完整故事
```

## 注意事项

### 使用限制
- 需要有效的 Gemini API 密钥
- 图片大小限制：10MB
- 故事长度：50-2000 字符
- 分镜数量：4-8 个场景

### 最佳实践
1. **角色图片**：选择清晰、特征明显的图片
2. **故事内容**：详细描述场景和动作
3. **等待时间**：图片生成需要一定时间，请耐心等待
4. **重新生成**：如果某个场景不满意，可以单独重新生成

### 常见问题
- **图片生成失败**：检查网络连接和 API 密钥
- **角色不一致**：尝试使用更清晰的角色参考图片
- **分镜不理想**：重新生成或调整故事描述

## 环境配置

确保在项目根目录下有 `.env.local` 文件，包含：
```
GEMINI_API_KEY=your_gemini_api_key_here
```

## 启动应用

```bash
npm install
npm run dev
```

应用将在 `http://localhost:5173` 启动。

---

享受创作你的 AI 故事分镜吧！🎨📚
